{"version":3,"sources":["components/common/input.jsx","components/common/form.jsx","services/httpService.js","services/authService.js","components/loginForm.jsx","components/logout.jsx","services/userService.js","components/registerForm.jsx","services/movieService.js","services/genreService.js","components/common/pagination.jsx","utils/paginate.js","components/common/listGroup.jsx","components/common/like.jsx","components/common/tableHeader.jsx","components/common/tableBody.jsx","components/common/table.jsx","components/moviesTable.jsx","components/movies.jsx","components/customers.jsx","components/rentals.jsx","components/movieForm.jsx","components/navBar.jsx","components/notFound.jsx","components/common/protectedRoute.jsx","App.js","reportWebVitals.js","index.js"],"names":["Input","name","label","value","onChange","error","type","className","htmlFor","autoFocus","id","Form","state","data","errors","validate","Joi","schema","abortEarly","details","item","path","message","console","log","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","input","currentTarget","errorMessage","validateProperty","obj","disabled","this","onClick","options","toUpperCase","defaultValue","map","key","Component","axios","defaults","baseURL","process","headers","common","REACT_URL","interceptors","response","use","status","toast","Promise","reject","get","post","put","delete","setJwt","jwt","login","email","password","a","http","localStorage","setItem","getCurrentUser","user","getItem","jwtDecode","loginWithJwt","LoginForm","username","string","required","props","location","window","from","pathname","Redirect","to","onSubmit","renderInput","renderButton","Logout","removeItem","register","RegisterForm","minDomainSegments","min","getMovies","movies","deleteMovie","movieId","moviesEndpoint","getMovie","movie","saveMovie","_id","body","getGenres","genres","Pagination","numberOfPages","Math","ceil","itemsCount","pageSize","pages","_","range","aria-label","page","onPageSelected","currentPage","href","paginate","items","slice","ListGroup","selectedItem","valueProperty","textProperty","onItemSelected","defaultProps","Like","icon","liked","faHeart","faHeartBroken","TableHeader","raiseSort","sortColumn","order","onSort","renderSortIcon","column","faSortUp","faSortDown","columns","TableBody","renderCell","content","Table","MoviesTable","Link","title","onLike","deleteColumn","onDelete","isAdmin","push","Movies","selectedGenre","searchedQuery","handleDelete","originalMovies","filter","m","handleLike","index","indexOf","handlePageSelection","handleGenreSelection","genre","handleSort","handleSearchInput","getPagedData","filteredMovies","genreFilter","movieNameFilter","includes","orderBy","totalCount","length","style","marginTop","placeholder","Customers","Rentals","MovieForm","genreId","numberInStock","dailyRentalRate","history","number","max","match","params","mapToViewModel","replace","populateGenres","populateMovie","renderSelect","NavBar","marginRight","Fragment","position","right","NotFound","ProtectedRoute","component","render","rest","Route","App","role","Switch","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","BrowserRouter","document","getElementById"],"mappings":"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","file":"static/js/main.af09bcb1.chunk.js","sourcesContent":["import * as React from 'react';\r\n\r\nexport const Input = ({name, label, value, onChange, error, type}) => {\r\n   return (<div className=\"form-group\">\r\n      <label htmlFor={name}>{label}</label>\r\n      <input\r\n         value={value}\r\n         onChange={onChange}\r\n         autoFocus\r\n         type={type}\r\n         id={name}\r\n         name={name}\r\n         className=\"form-control\"\r\n      />\r\n\r\n      {error && <div className=\"alert alert-danger mt-2\">{error}</div>}\r\n   </div>);\r\n};\r\n","import React, {Component} from \"react\";\r\nimport Joi from \"joi-browser\";\r\nimport {Input} from \"./input\";\r\n\r\nexport default class Form extends Component {\r\n   state = {\r\n      data:{},\r\n      errors:{}\r\n   }\r\n\r\n   validate = () => {\r\n      const options = {abortEarly: false};\r\n      const {error} = Joi.validate(this.state.data, this.schema,options);\r\n      if(!error) return null;\r\n\r\n      const errors = {};\r\n      for (let item of error.details) {\r\n         errors[item.path[0]] = item.message;\r\n      }\r\n\r\n      console.log(\"Errors: \",errors);\r\n\r\n      return errors;\r\n   }\r\n\r\n   handleSubmit = e => {\r\n      e.preventDefault();\r\n\r\n      const errors = this.validate();\r\n      this.setState({errors: errors || {}});\r\n      if(errors)\r\n         return console.log(\"Errors: \",errors);\r\n\r\n      this.doSubmit();\r\n   }\r\n\r\n   handleChange = ({currentTarget: input}) => {\r\n      const errors = {...this.state.errors};\r\n      const errorMessage = this.validateProperty(input);\r\n\r\n      if(errorMessage) errors[input.name] = errorMessage;\r\n      else delete errors[input.name]\r\n\r\n      const data = {...this.state.data};\r\n      data[input.name] = input.value;\r\n\r\n\r\n      this.setState({data, errors});\r\n   }\r\n\r\n   renderButton(label) {\r\n      return (<button\r\n         className=\"btn btn-primary\"\r\n         disabled={this.validate()}\r\n         onClick={(e) => this.handleSubmit(e)}>\r\n         {label}\r\n      </button>)\r\n   }\r\n\r\n   validateProperty = ({name, value}) => {\r\n      const obj = {[name]: value};\r\n      const schema = {[name]: this.schema[name]};\r\n\r\n      const {error} = Joi.validate(obj, schema);\r\n\r\n      return error ? error.details[0].message : null;\r\n   }\r\n\r\n   renderInput(name,label,type='text'){\r\n      const {data, errors} = this.state;\r\n\r\n      return(\r\n         <Input\r\n            type={type}\r\n            name={name}\r\n            value={data[name]}\r\n            label={label}\r\n            onChange={this.handleChange}\r\n            error={errors[name]}\r\n         />\r\n      )\r\n   }\r\n\r\n   renderSelect(name,value,label,options = []){\r\n      const {data} = this.state;\r\n\r\n      return(<div className={\"form-group\"}>\r\n         <label htmlFor={name}>{label.toUpperCase()}</label>\r\n\r\n         <select onChange={this.handleChange} name={name} id={name} defaultValue={data[name]} className={\"form-control mb-2\"}>\r\n            {options.map((e, key) => {\r\n               return <option key={key} value={e[value]}>{e[label]}</option>;\r\n            })}\r\n         </select>\r\n      </div>)\r\n   }\r\n}\r\n","import axios from \"axios\";\r\nimport {toast} from \"react-toastify\";\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\naxios.defaults.headers.common[\"Access-Control-Allow-Origin\"] = process.env.REACT_URL\r\n\r\naxios.interceptors.response.use(null, error => {\r\n   const expectedError =\r\n      error.response &&\r\n      error.response.status >= 400 &&\r\n      error.response.status<500;\r\n\r\n   if(!expectedError)\r\n      toast.error(\"An unexpected error occurred...\")\r\n\r\n\r\n   return Promise.reject(error);\r\n});\r\n\r\nfunction setJwt(jwt){\r\n   axios.defaults.headers.common[\"x-auth-token\"] = jwt;\r\n}\r\n\r\n\r\nexport default {\r\n   get: axios.get,\r\n   post: axios.post,\r\n   put: axios.put,\r\n   delete: axios.delete,\r\n   setJwt: setJwt\r\n}\r\n","import config from \"../config.json\";\r\nimport http from \"./httpService\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nconst authEndpoint = \"/auth\";\r\n\r\nhttp.setJwt(getJwt())\r\n\r\nexport async function login(email, password){\r\n   const {data: jwt} = await http.post(authEndpoint,{email, password});\r\n   localStorage.setItem(\"token\",jwt);\r\n}\r\n\r\nexport function logout(){\r\n   localStorage.removeItem(\"token\");\r\n}\r\n\r\nexport function getCurrentUser(){\r\n   let user = null;\r\n\r\n   try {\r\n      const jwt = localStorage.getItem(\"token\");\r\n      user = jwtDecode(jwt);\r\n   } catch (e) {\r\n      console.log(\"Unable to retrieve user: \",e);\r\n   }\r\n   return user;\r\n}\r\n\r\nexport function loginWithJwt(jwt){\r\n   localStorage.setItem(\"token\",jwt);\r\n}\r\n\r\nexport function getJwt(){\r\n   return localStorage.getItem(\"token\");\r\n}\r\n","import React from \"react\";\r\nimport Joi from 'joi-browser';\r\nimport Form from \"./common/form\";\r\nimport {getCurrentUser, login} from \"../services/authService\"\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nexport default class LoginForm extends Form {\r\n   state = {\r\n      data: {username: 'louis.charles@gadz.org', password: 'password'},\r\n      errors:{}\r\n   }\r\n\r\n   schema = {\r\n      username: Joi.string().required().label(\"Username\"),\r\n      password: Joi.string().required().label(\"Password\")\r\n   }\r\n\r\n   doSubmit = async () => {\r\n      try {\r\n         const { data } = this.state;\r\n         await login(data.username,data.password);\r\n\r\n         const {state} = this.props.location;\r\n         window.location = state\r\n            ? state.from.pathname\r\n            : \"/\";\r\n      } catch(ex) {\r\n         if(ex.response && ex.response.status === 400){\r\n            const errors = {...this.state.errors};\r\n            errors.username = ex.response.data;\r\n\r\n            this.setState({errors});\r\n         }\r\n      }\r\n   }\r\n\r\n   validateProperty = ({name, value}) => {\r\n      const obj = {[name]: value};\r\n      const schema = {[name]: this.schema[name]};\r\n\r\n      const {error} = Joi.validate(obj, schema);\r\n\r\n      return error ? error.details[0].message : null;\r\n   }\r\n\r\n\r\n   render() {\r\n      if(getCurrentUser()) return <Redirect to={\"/\"}/>\r\n\r\n      return (<div className=\"container\">\r\n         <form onSubmit={this.handleSubmit}>\r\n            {this.renderInput('username','Username')}\r\n            {this.renderInput('password','Password','password')}\r\n\r\n            {this.renderButton(\"Login\")}\r\n         </form>\r\n      </div>)\r\n   }\r\n}\r\n","import {Component} from \"react\";\r\nimport {logout} from \"../services/authService\";\r\n\r\nexport default class Logout extends Component {\r\n   componentDidMount() {\r\n      logout();\r\n\r\n      window.location = \"/\";\r\n   }\r\n\r\n   render() {\r\n      const {} = this.props;\r\n\r\n      return null;\r\n   }\r\n}\r\n\r\n\r\n","import http from \"./httpService\"\r\n\r\nconst usersEndpoint = \"/users\";\r\n\r\nexport function register(user) {\r\n   return http.post(usersEndpoint,{\r\n      email: user.username,\r\n      password: user.password,\r\n      name: user.name\r\n   })\r\n}\r\n","import React from \"react\";\r\nimport Joi from 'joi-browser';\r\nimport Form from \"./common/form\";\r\nimport {register} from \"../services/userService\";\r\nimport {loginWithJwt} from \"../services/authService\";\r\n\r\nexport default class RegisterForm extends Form {\r\n   state = {\r\n      data: {username: '', password: '', name: ''},\r\n      errors:{}\r\n   }\r\n\r\n   schema = {\r\n      username: Joi.string()\r\n         .email({ minDomainSegments: 2})\r\n         .required()\r\n         .label(\"Username\"),\r\n      password: Joi.string()\r\n         .min(5)\r\n         .required()\r\n         .label(\"Password\"),\r\n      name: Joi.string()\r\n         .min(4)\r\n         .required()\r\n   }\r\n\r\n   doSubmit = async () => {\r\n      try{\r\n         const response = await register(this.state.data);\r\n         loginWithJwt(response.headers([\"x-auth-token\"]));\r\n         window.location = \"/\";\r\n      }catch (ex) {\r\n         if(ex.response && ex.response.status === 400){\r\n            const errors = {...this.state.errors};\r\n            errors.username = ex.response.data;\r\n            this.setState({errors});\r\n         }\r\n      }\r\n\r\n   }\r\n\r\n   validateProperty = ({name, value}) => {\r\n      const obj = {[name]: value};\r\n      const schema = {[name]: this.schema[name]};\r\n\r\n      const {error} = Joi.validate(obj, schema);\r\n\r\n      return error ? error.details[0].message : null;\r\n   }\r\n\r\n\r\n   render() {\r\n      return (<div className=\"container\">\r\n         <form onSubmit={this.handleSubmit}>\r\n            {this.renderInput('username','Username','email')}\r\n            {this.renderInput('password','Password','password')}\r\n            {this.renderInput('name','Name')}\r\n\r\n            {this.renderButton(\"Register\")}\r\n         </form>\r\n      </div>)\r\n   }\r\n}\r\n","import config from \"../config.json\";\r\nimport http from \"./httpService\";\r\n\r\nconst moviesEndpoint = \"/movies\"\r\n\r\nexport async function getMovies(){\r\n   const {data: movies} = await http.get(moviesEndpoint)\r\n\r\n   return movies;\r\n}\r\n\r\nexport async function deleteMovie(movieId){\r\n   await http.delete(moviesEndpoint+\"/\"+movieId);\r\n}\r\n\r\nexport async function getMovie(id) {\r\n   const {data: movie} = await http.get(moviesEndpoint+\"/\"+id)\r\n\r\n   return movie;\r\n}\r\n\r\nexport async function saveMovie(movie) {\r\n   // Case where we update the movie\r\n   if(movie._id){\r\n      const body = {...movie};\r\n      delete body._id;\r\n\r\n      await http.put(moviesEndpoint+\"/\"+movie._id,body);\r\n\r\n      return movie;\r\n   }\r\n\r\n   // Case where we create a movie\r\n   await http.post(moviesEndpoint,movie);\r\n\r\n   return movie;\r\n}\r\n","import http from \"./httpService\";\r\n\r\nconst genresEndpoint = \"/genres\"\r\n\r\nexport async function getGenres(){\r\n   const {data: genres} = await http.get(genresEndpoint);\r\n\r\n   return genres;\r\n}\r\n","import React, {Component} from \"react\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n\r\nclass Pagination extends Component {\r\n   state = {\r\n      numberOfPages: Math.ceil(this.props.itemsCount / this.props.pageSize)\r\n   }\r\n\r\n   render(){\r\n      const pages = _.range(1, this.state.numberOfPages +1)\r\n\r\n      return(<div>\r\n         <nav aria-label=\"Page navigation example\">\r\n            <ul className=\"pagination\">\r\n               {pages.map((page) => (\r\n                  <li key={page} onClick={() => this.props.onPageSelected(page)}\r\n                      className={`page-item ${this.props.currentPage === page ? 'active' : null}`}>\r\n                     <a className=\"page-link\" href={\"#/\"}>{page}</a>\r\n                  </li>\r\n               ))}\r\n            </ul>\r\n         </nav>\r\n      </div>)\r\n   }\r\n\r\n}\r\n\r\nPagination.propTypes = {\r\n   itemsCount: PropTypes.number.isRequired,\r\n   pageSize: PropTypes.number.isRequired,\r\n   currentPage: PropTypes.number.isRequired,\r\n   onPageSelected: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Pagination;\r\n","export function paginate(items, currentPage, pageSize){\r\n   return items.slice((currentPage - 1) * pageSize, currentPage * pageSize);\r\n}\r\n","import React, {Component} from \"react\";\r\n\r\nclass ListGroup extends Component {\r\n   render() {\r\n      const {\r\n         items,\r\n         selectedItem,\r\n         valueProperty,\r\n         textProperty,\r\n         onItemSelected\r\n      } = this.props;\r\n\r\n      return (<div>\r\n         <ul className={\"list-group\"}>\r\n            {items.map((item) => (\r\n               <li key={item[valueProperty]}\r\n                   className={`list-group-item ${selectedItem === item[textProperty] ? \"active\" : null}`}\r\n                   onClick={() => onItemSelected(item)}>\r\n                  {item[textProperty]}\r\n               </li>\r\n            ))}\r\n         </ul>\r\n      </div>)\r\n   }\r\n}\r\n\r\nListGroup.defaultProps = {\r\n   textProperty: \"name\",\r\n   valueProperty: \"_id\"\r\n}\r\n\r\nexport default ListGroup;\r\n","import React, {Component} from \"react\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faHeart, faHeartBroken} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nexport default class Like extends Component {\r\n\tstate = {}\r\n\r\n\trender(){\r\n\t\treturn(<div>\r\n         <FontAwesomeIcon\r\n            className={\"mr-2\"} icon={this.props.liked ? faHeart : faHeartBroken}\r\n            onClick={this.props.onClick}\r\n         />\r\n\t\t</div>)\r\n\t}\r\n\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faSortUp, faSortDown} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\n\r\nclass TableHeader extends Component {\r\n   raiseSort = (path) => {\r\n      const sortColumn= {...this.props.sortColumn};\r\n\r\n      if(sortColumn.path===path)\r\n         sortColumn.order = (sortColumn.order === 'asc') ? 'desc' : 'asc';\r\n      else {\r\n         sortColumn.path = path;\r\n         sortColumn.order = \"asc\";\r\n      }\r\n\r\n      this.props.onSort(sortColumn);\r\n   }\r\n\r\n   renderSortIcon = (column) => {\r\n      if(column.path !== this.props.sortColumn.path) return null;\r\n\r\n      if(this.props.sortColumn.order === \"asc\") return <FontAwesomeIcon icon={faSortUp}/>\r\n\r\n      return <FontAwesomeIcon icon={faSortDown}/>\r\n   }\r\n\r\n   render() {\r\n      return (<thead>\r\n      <tr>\r\n         {this.props.columns.map(column => (\r\n            <th onClick={() => this.raiseSort(column.path)} key={column.path || column.key} className={\"clickable\"}>\r\n               <div className=\"row\">\r\n                  <div className=\"col-6\">{column.label}</div>\r\n                  <div className=\"col-6 text-right\">{this.renderSortIcon(column)}</div>\r\n               </div>\r\n            </th>\r\n         ))}\r\n      </tr>\r\n      </thead>)\r\n   }\r\n}\r\n\r\nexport default TableHeader;\r\n","import React, {Component} from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nclass TableBody extends Component {\r\n\r\n   renderCell = (item, column) => {\r\n      if(column.content)\r\n         return column.content(item)\r\n\r\n      return _.get(item, column.path);\r\n   }\r\n\r\n   render() {\r\n      const {\r\n         data,\r\n         columns\r\n      } = this.props;\r\n\r\n      return (\r\n\r\n         <tbody>\r\n         {data.map((item) => (\r\n            <tr key={item._id}>\r\n               {columns.map(column => <td key={column.label || column.key}>\r\n                  {this.renderCell(item,column)}</td>)}\r\n            </tr>))\r\n         }\r\n         </tbody>\r\n      )\r\n   }\r\n}\r\n\r\nexport default TableBody;\r\n","import React, {Component} from \"react\";\r\nimport TableHeader from \"./tableHeader\";\r\nimport TableBody from \"./tableBody\";\r\n\r\nclass Table extends Component {\r\n   state = {}\r\n\r\n   render() {\r\n      const {\r\n         data,\r\n         columns,\r\n         sortColumn,\r\n         onSort\r\n      } = this.props;\r\n\r\n      return (<table className=\"table\">\r\n         <TableHeader columns={columns} sortColumn={sortColumn} onSort={onSort}/>\r\n\r\n         <TableBody data={data} columns={columns}/>\r\n      </table>)\r\n   }\r\n}\r\n\r\nexport default Table;\r\n","import React, {Component} from \"react\";\r\nimport Like from \"./common/like\";\r\nimport Table from \"./common/table\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {getCurrentUser} from \"../services/authService\";\r\n\r\nexport default class MoviesTable extends Component {\r\n   state = {\r\n      columns:[\r\n         {key: \"title\", label: \"Title\", content: movie => <Link to={`/movies/${movie._id}`}>{movie.title}</Link>},\r\n         {path: \"genre.name\", label: \"Genre\"},\r\n         {path: \"numberInStock\", label: \"Stock\"},\r\n         {path: \"dailyRentalRate\", label: \"Rate\"},\r\n         {key: \"like\", content: movie => <Like liked={movie.liked} onClick={() => this.props.onLike(movie)}/>}\r\n      ]\r\n   }\r\n\r\n   deleteColumn = {\r\n      key: \"delete\",\r\n      content: movie => (<button onClick={() => this.props.onDelete(movie._id)} className={\"btn btn-danger btn-sm\"}>\r\n         Delete\r\n      </button>)\r\n   }\r\n\r\n   constructor() {\r\n      super();\r\n\r\n      const user = getCurrentUser();\r\n      if(user && user.isAdmin)\r\n         this.state.columns.push(this.deleteColumn);\r\n\r\n   }\r\n\r\n\r\n\r\n   render() {\r\n      const {\r\n         movies\r\n      } = this.props;\r\n\r\n      return (<Table\r\n         data={movies} columns={this.state.columns}\r\n         sortColumn={this.props.sortColumn}\r\n         onSort={this.props.onSort}\r\n      />)\r\n   }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {getMovies, deleteMovie} from \"../services/movieService\";\r\nimport {getGenres} from \"../services/genreService\";\r\n\r\nimport {toast} from \"react-toastify\";\r\nimport Pagination from \"./common/pagination\";\r\nimport {paginate} from \"../utils/paginate\";\r\nimport ListGroup from \"./common/listGroup\";\r\nimport MoviesTable from \"./moviesTable\";\r\nimport _ from \"lodash\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default class Movies extends Component {\r\n   state = {\r\n      movies: [],\r\n      genres: [],\r\n      currentPage: 1,\r\n      pageSize: 4,\r\n      selectedGenre: \"All Genres\",\r\n      searchedQuery: \"\",\r\n      sortColumn:{path: \"title\", order: \"asc\"}\r\n   }\r\n\r\n   async componentDidMount() {\r\n      const genres = [{_id: 0 ,name: \"All Genres\"},...await getGenres()]\r\n\r\n      const movies = await getMovies();\r\n\r\n      this.setState({\r\n         movies: movies,\r\n         genres\r\n      })\r\n   }\r\n\r\n   handleDelete = async (movieId) => {\r\n      const originalMovies = this.state.movies;\r\n      let movies = originalMovies.filter(m => m._id !==movieId);\r\n      this.setState({movies: movies})\r\n\r\n      try{\r\n         await deleteMovie(movieId);\r\n      } catch(ex) {\r\n         if(ex.response && ex.response.status === 404)\r\n            toast.error(\"This movie has already been deleted\")\r\n\r\n         this.setState({movies: originalMovies})\r\n      }\r\n\r\n   }\r\n\r\n   handleLike = (movie) => {\r\n      const movies = [...this.state.movies];\r\n      const index = movies.indexOf(movie);\r\n\r\n      movies[index] = {...movie};\r\n      movies[index].liked = !movie.liked;\r\n\r\n      this.setState({movies})\r\n   }\r\n\r\n   handlePageSelection = (page) => {\r\n      this.setState({currentPage: page});\r\n   }\r\n\r\n   handleGenreSelection = (genre) => {\r\n      this.setState({\r\n         currentPage: 1,\r\n         selectedGenre: genre.name\r\n      });\r\n   }\r\n\r\n   handleSort = (sortColumn) => {\r\n      this.setState({ sortColumn });\r\n   }\r\n\r\n   handleSearchInput = ({currentTarget: input}) => {\r\n      this.setState({\r\n         selectedGenre: \"All Genres\",\r\n         searchedQuery: input.value,\r\n         currentPage: 1\r\n      });\r\n   }\r\n\r\n   getPagedData = () => {\r\n      const filteredMovies = this.state.movies.filter(movie => {\r\n            let genreFilter = true;\r\n            let movieNameFilter = true;\r\n\r\n            if(this.state.selectedGenre!==\"All Genres\")\r\n               genreFilter = movie.genre.name === this.state.selectedGenre\r\n\r\n            if(this.state.searchedQuery)\r\n               movieNameFilter = movie.title.toUpperCase().includes(this.state.searchedQuery.toUpperCase())\r\n\r\n            return genreFilter && movieNameFilter;\r\n         });\r\n\r\n      const sortedMovies = _.orderBy(filteredMovies, [this.state.sortColumn.path], [this.state.sortColumn.order])\r\n\r\n      const movies = paginate(\r\n         sortedMovies,\r\n         this.state.currentPage,\r\n         this.state.pageSize\r\n      );\r\n\r\n      return {\r\n         totalCount: filteredMovies.length,\r\n         data: movies\r\n      };\r\n   }\r\n\r\n   render() {\r\n      const {totalCount, data : movies} = this.getPagedData();\r\n      const user = this.props.user;\r\n\r\n      return (<div className={\"row\"}>\r\n         <div className={\"col-2\"} style={{marginTop: \"70px\"}}>\r\n            <ListGroup items={this.state.genres} onItemSelected={this.handleGenreSelection} selectedItem={this.state.selectedGenre}/>\r\n         </div>\r\n\r\n         <div className={\"col\"}>\r\n            {user && (<Link to={\"/movies/new\"} className={\"btn btn-primary mb-2\"}>\r\n               New movie\r\n            </Link>)}\r\n\r\n            {totalCount > 0 && <div>Showing {totalCount} movies in the database\r\n\r\n               <input type=\"text\" className=\"form-control my-2\" placeholder={\"Search movie...\"}\r\n                      onChange={this.handleSearchInput}\r\n               />\r\n\r\n               <MoviesTable\r\n                  movies={movies} sortColumn={this.state.sortColumn}\r\n                  onDelete={this.handleDelete} onLike={this.handleLike} onSort={this.handleSort}\r\n               />\r\n\r\n               <Pagination\r\n                  itemsCount={totalCount}\r\n                  pageSize={this.state.pageSize}\r\n                  currentPage={this.state.currentPage}\r\n                  onPageSelected={this.handlePageSelection}\r\n               />\r\n            </div>}\r\n\r\n\r\n            {!this.state.movies.length && <div>\r\n               No movies retrieved...\r\n            </div>}\r\n\r\n         </div>\r\n      </div>)\r\n   }\r\n}\r\n","import React, {Component} from \"react\";\r\n\r\nexport default class Customers extends Component {\r\n   state = {}\r\n\r\n   render() {\r\n      const {} = this.props;\r\n\r\n      return (<div>\r\n         <h1>Customers</h1>\r\n      </div>)\r\n   }\r\n}\r\n","import React, {Component} from \"react\";\r\n\r\nexport default class Rentals extends Component {\r\n   state = {}\r\n\r\n   render() {\r\n      const {} = this.props;\r\n\r\n      return (<div>\r\n         <h1>Rentals</h1>\r\n      </div>)\r\n   }\r\n}\r\n","import React from \"react\";\r\nimport {getMovie, saveMovie} from \"../services/movieService\";\r\nimport Joi from \"joi-browser\";\r\nimport Form from \"./common/form\";\r\nimport {getGenres} from \"../services/genreService\";\r\n\r\nexport default class MovieForm extends Form {\r\n   state = {\r\n      data: null,\r\n      errors: {},\r\n      genres: []\r\n   }\r\n\r\n   async populateGenres(){\r\n      const genres = await getGenres();\r\n      this.setState({ genres });\r\n   }\r\n\r\n   async populateMovie(){\r\n      try{\r\n         const movieId = this.props.match.params.movieId;\r\n         if(movieId===\"new\") {\r\n            this.setState({data: {\r\n                  title: \"\",\r\n                  genreId: this.state.genres[0]._id,\r\n                  numberInStock: 0,\r\n                  dailyRentalRate: 0\r\n               }\r\n            })\r\n\r\n            return;\r\n         }\r\n\r\n         const movie = await getMovie(movieId);\r\n         this.setState({data: this.mapToViewModel(movie)});\r\n      } catch(ex) {\r\n         return this.props.history.replace(\"/not-found\");\r\n      }\r\n   }\r\n\r\n   async componentDidMount() {\r\n      await this.populateGenres();\r\n      await this.populateMovie();\r\n   }\r\n\r\n   //Optional: map the data coming from the API\r\n   mapToViewModel(movie){\r\n      return{\r\n         _id: movie._id,\r\n         title: movie.title,\r\n         genreId: movie.genre._id,\r\n         numberInStock: movie.numberInStock,\r\n         dailyRentalRate: movie.dailyRentalRate\r\n      }\r\n   }\r\n\r\n   doSubmit = async () => {\r\n      const movie = this.state.data;\r\n      await saveMovie({\r\n         _id: movie._id,\r\n         title: movie.title,\r\n         genreId: movie.genreId,\r\n         numberInStock: movie.numberInStock,\r\n         dailyRentalRate: movie.dailyRentalRate\r\n      });\r\n\r\n      this.props.history.push(\"/movies\");\r\n   }\r\n\r\n   schema = {\r\n      _id: Joi.string(),\r\n      title: Joi.string()\r\n         .required()\r\n         .label(\"Title\"),\r\n      genreId: Joi.string()\r\n         .required()\r\n         .label(\"Genre\"),\r\n      numberInStock: Joi.number()\r\n         .min(0)\r\n         .max(100)\r\n         .required(),\r\n      dailyRentalRate: Joi.number()\r\n         .min(0)\r\n         .required()\r\n   }\r\n\r\n   render() {\r\n      const {\r\n         match\r\n      } = this.props;\r\n\r\n      if(!this.state.data)\r\n         return (<div>Loading...</div>)\r\n\r\n      return (<div>\r\n         <h1>Movie Form {match.params.movieId}</h1>\r\n\r\n         {this.renderInput('title','Title')}\r\n         {this.renderSelect('genreId','_id','name',this.state.genres)}\r\n         {this.renderInput('numberInStock','Number in Stock','number')}\r\n         {this.renderInput('dailyRentalRate','Rate','number')}\r\n\r\n         {this.renderButton(\"Save\")}\r\n      </div>)\r\n   }\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nclass NavBar extends Component {\r\n   state = {}\r\n\r\n   render() {\r\n      const {user} = this.props;\r\n\r\n      return (<nav className=\"navbar navbar-expand-md navbar-dark fixed-top bg-dark\">\r\n         <a className=\"navbar-brand\" href=\"#\">Vidly</a>\r\n\r\n         <div className=\"collapse navbar-collapse\" id=\"navbarCollapse\">\r\n            <ul className=\"navbar-nav mr-auto\">\r\n               <li className=\"nav-item nav-link\" style={{marginRight: \"20px\"}}>\r\n                  <Link to={\"/movies\"}>Movies</Link>\r\n               </li>\r\n               <li className=\"nav-item nav-link\" style={{marginRight: \"20px\"}}>\r\n                  <Link to={\"/customers\"}>Customers</Link>\r\n               </li>\r\n               <li className=\"nav-item nav-link\" style={{marginRight: \"20px\"}}>\r\n                  <Link to={\"/rentals\"}>Rentals</Link>\r\n               </li>\r\n\r\n               {!user && <React.Fragment>\r\n                  <li className=\"nav-item nav-link\">\r\n                     <Link to={\"/register\"}>Register</Link>\r\n                  </li>\r\n\r\n                  <li className=\"nav-item nav-link\">\r\n                     <Link to={\"/login\"}>Login</Link>\r\n                  </li>\r\n               </React.Fragment>}\r\n\r\n               {user && <React.Fragment>\r\n                  <li className=\"nav-item nav-link\">\r\n                     <Link to={\"/logout\"}>Logout</Link>\r\n                  </li>\r\n\r\n                  <li className=\"nav-item nav-link text-white\" style={{position: \"absolute\", right: \"20px\"}}>\r\n                     {user ? user.name : \"\"}\r\n                  </li>\r\n               </React.Fragment>}\r\n            </ul>\r\n         </div>\r\n      </nav>)\r\n   }\r\n}\r\n\r\nexport default NavBar;\r\n","import React, {Component} from \"react\";\r\n\r\nexport default class NotFound extends Component {\r\n   state = {}\r\n\r\n   render() {\r\n      const {} = this.props;\r\n\r\n      return (<div>\r\n         <h1>Not Found</h1>\r\n      </div>)\r\n   }\r\n}\r\n","import {Redirect, Route} from \"react-router-dom\";\r\nimport {getCurrentUser} from \"../../services/authService\";\r\nimport React from \"react\";\r\n\r\nexport const ProtectedRoute = ({path, component: Component, render, ...rest}) => {\r\n   return (<Route\r\n      path={path}\r\n      {...rest}\r\n      render={props => {\r\n         if(!getCurrentUser()) return <Redirect to={{\r\n            pathname: \"/login\",\r\n            state: {from: props.location}\r\n         }}/>\r\n\r\n         return Component\r\n            ? <Component {...props}/>\r\n            : render(props);\r\n      }}/>);\r\n};\r\n","import React, {Component} from \"react\";\nimport {Redirect, Route, Switch} from \"react-router-dom\";\nimport {ToastContainer} from \"react-toastify\";\n\nimport LoginForm from \"./components/loginForm\";\nimport Logout from \"./components/logout\";\n\nimport RegisterForm from \"./components/registerForm\";\nimport Movies from \"./components/movies\";\nimport Customers from \"./components/customers\";\nimport Rentals from \"./components/rentals\";\n\nimport MovieForm from \"./components/movieForm\";\nimport NavBar from \"./components/navBar\";\n\nimport NotFound from \"./components/notFound\";\nimport './App.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport {getCurrentUser} from \"./services/authService\";\nimport {ProtectedRoute} from \"./components/common/protectedRoute\";\n\nexport default class App extends Component {\n\tstate = {};\n\n\tcomponentDidMount() {\n\t\tthis.setState({user: getCurrentUser()});\n\t}\n\n\trender(){\n\t\treturn(<main role=\"main\" className=\"container-fluid\">\n\t\t\t<NavBar user={this.state.user}/>\n\t\t\t<ToastContainer/>\n\n\t\t\t<div style={{marginTop: \"100px\"}}>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path={\"/login\"} exact component={LoginForm}/>\n\t\t\t\t\t<Route path={\"/logout\"} component={Logout}/>\n\t\t\t\t\t<Route path={\"/register\"} exact component={RegisterForm}/>\n\t\t\t\t\t<Route path={\"/movies\"} exact render={props => <Movies\n\t\t\t\t\t\t{...props} user={this.state.user}\n\t\t\t\t\t/>}/>\n\t\t\t\t\t<ProtectedRoute path={\"/movies/:movieId\"} component={MovieForm}/>\n\t\t\t\t\t<Route path={\"/customers\"} component={Customers}/>\n\t\t\t\t\t<Route path={\"/rentals\"} component={Rentals}/>\n\t\t\t\t\t<Route path={\"/not-found\"} component={NotFound}/>\n\n\t\t\t\t\t<Redirect from={\"/\"} exact to={\"/movies\"}/>\n\t\t\t\t\t<Redirect to={\"/not-found\"}/>\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t</main>)\n\t}\n\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\nimport {BrowserRouter} from \"react-router-dom\";\n\n\nconsole.log(\"Env: \",process.env);\n\nReactDOM.render(\n   <BrowserRouter>\n      <App/>\n   </BrowserRouter>,\n   document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}